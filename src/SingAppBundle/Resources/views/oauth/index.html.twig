{% extends '@SingApp/layouts/base.html.twig' %}
{% block stylesheets %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.10.0/jquery.timepicker.min.css"
          rel="stylesheet"/>
{% endblock %}
{% block body %}
    {% if is_granted('ROLE_USER') %}
        <div class="products">
            {% include '@SingApp/layouts/navigation.html.twig' %}
            <div class="messages">
                <div class="card">
                    <div class="product-card-header">
                        <div class="card-header-title">
                            <span class="card-title">Your business listing report</span>
                        </div>
                        <div>
                            <button class="btn btn-primary" data-toggle="modal"
                                    data-target="#editBusinessModal">
                                Edit Business
                            </button>
                            <button class="btn btn-primary" data-toggle="modal"
                                    data-target="#addBusinessModal">
                                Add Business
                            </button>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="black-card">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="listing-reports" style="display: flex">
                                            <div class="col-xs-12 col-sm-12 col-md-12 brand-section">
                                                <figure>
                                                    {% set logo = 'images/edit-business-modal/missing.png' %}
                                                    {% if currentBusiness.logo is not null %}
                                                        {% set logo = currentBusiness.logo %}
                                                    {% endif %}
                                                    <img width="100%"
                                                         src="{{ asset(logo) }}"
                                                         alt="Missing">
                                                </figure>
                                                <div class="col-xs-9 col-sm-9 col-md-9 brand-details">
                                                    <h2>{{ currentBusiness.name }}</h2>
                                                    <h3></h3>
                                                    <div class="col-xs-12 col-sm-12 col-md-12 brand-contact-details mrt20 no-padding">
                                                        <div class="col-xs-3 col-sm-3 col-md-3 brand-address no-padding">
                                                            <label for="address-label">Address &amp; Contact</label>
                                                            <address>
                                                                {{ currentBusiness.address }}
                                                            </address>
                                                        </div>
                                                        <div class="col-xs-9 col-sm-9 col-md-9 brand-description">
                                                            <label for="address-label" class="description">Business
                                                                Description</label>
                                                            <p>
                                                                {{ currentBusiness.description }}
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="card-body row">
                        <div class="col-md-12 list-item-container">
                            <div class="list-item clearfix col-md-12">
                                <div class="col-md-12">
                                    <div class="col-md-5">
                                        <img class="service-icon" src="/images/listing-icons/maps.google.com.png" alt=""
                                             width="25"
                                             height="25">
                                        <p class="list-item-title">
                                            Google My Business
                                        </p>
                                    </div>
                                    <div class="col-md-7">
                                        {{ getButton('google', currentBusiness, app.user)|raw }}
                                    </div>
                                </div>

                                <hr class="hr-line">
                                {{ getStatusConnect('google', currentBusiness, app.user)|raw }}
                            </div>
                        </div>
                        <div class="col-md-12 list-item-container">
                            <div class="list-item clearfix col-md-12">
                                <div class="col-md-12">
                                    <div class="col-md-5">
                                        <img class="service-icon" src="/images/listing-icons/www.bing.com.png" alt=""
                                             width="25"
                                             height="25">
                                        <p class="list-item-title">
                                            Bing Places
                                        </p>
                                    </div>
                                    <div class="col-md-7">
                                        {{ getButton('bing', currentBusiness, app.user)|raw }}
                                    </div>
                                </div>

                                <hr class="hr-line">
                                {{ getStatusConnect('bing', currentBusiness, app.user)|raw }}
                            </div>
                        </div>
                        <div class="col-md-12 list-item-container">
                            <div class="list-item clearfix col-md-12">
                                <div class="col-md-12">
                                    <div class="col-md-5">
                                        <img class="service-icon" src="/images/listing-icons/facebook.com.png" alt=""
                                             width="25"
                                             height="25">
                                        <p class="list-item-title">
                                            Facebook
                                        </p>
                                    </div>
                                    <div class="col-md-7">
                                        {{ getButton('facebook', currentBusiness, app.user)|raw }}
                                    </div>
                                </div>

                                <hr class="hr-line">
                                {{ getStatusConnect('facebook', currentBusiness, app.user)|raw }}
                            </div>
                        </div>
                        <div class="col-md-12 list-item-container">
                            <div class="list-item clearfix col-md-12">
                                <div class="col-md-12">
                                    <div class="col-md-5">
                                        <img class="service-icon" src="/images/listing-icons/yelp.com.png" alt=""
                                             width="25"
                                             height="25">
                                        <p class="list-item-title">
                                            Yelp
                                        </p>
                                    </div>
                                    <div class="col-md-7">
                                        {{ getButton('yelp', currentBusiness, app.user)|raw }}
                                    </div>
                                </div>

                                <hr class="hr-line">
                                {{ getStatusConnect('yelp', currentBusiness, app.user)|raw }}
                            </div>
                        </div>
                        <div class="col-md-12 list-item-container">
                            <div class="list-item clearfix col-md-12">
                                <div class="col-md-12">
                                    <div class="col-md-5">
                                        <img class="service-icon" src="/images/listing-icons/instagrame.com.png" alt=""
                                             width="25"
                                             height="25">
                                        <p class="list-item-title">
                                            Instagram Business
                                        </p>
                                    </div>
                                    <div class="col-md-7">
                                        {{ getButton('instagram', currentBusiness, app.user)|raw }}
                                    </div>
                                </div>

                                <hr class="hr-line">
                                {{ getStatusConnect('instagram', currentBusiness, app.user)|raw }}
                            </div>
                        </div>
                        <div class="col-md-12 list-item-container">
                            <div class="list-item clearfix col-md-12">
                                <div class="col-md-12">
                                    <div class="col-md-5">
                                        <img class="service-icon" src="/images/listing-icons/foursquare.com.png" alt=""
                                             width="25"
                                             height="25">
                                        <p class="list-item-title">
                                            Foursquare
                                        </p>
                                    </div>
                                    <div class="col-md-7">
                                        {{ getButton('foursquare', currentBusiness, app.user)|raw }}
                                    </div>
                                </div>

                                <hr class="hr-line">
                                {{ getStatusConnect('foursquare', currentBusiness, app.user)|raw }}
                            </div>
                        </div>
                        <div class="col-md-12 list-item-container">
                            <div class="list-item clearfix col-md-12">
                                <div class="col-md-12">
                                    <div class="col-md-5">
                                        <img class="service-icon" src="/images/listing-icons/pinterest.com.png" alt=""
                                             width="25"
                                             height="25">
                                        <p class="list-item-title">
                                            Pinterest
                                        </p>
                                    </div>
                                    <div class="col-md-7">
                                        {{ getButton('pinterest', currentBusiness, app.user)|raw }}
                                    </div>
                                </div>

                                <hr class="hr-line">
                                {{ getStatusConnect('pinterest', currentBusiness, app.user)|raw }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}
{% block modal %}
    <div class="modal fade" id="editBusinessModal" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Edit business</h4>
                </div>
                {{ form_start(businessFormEdit) }}
                <div class="modal-body">
                    {{ form_widget(businessFormEdit) }}
                    {% for photo in currentBusiness.photos %}
                        <img style="width: 12%" src="{{ asset(''~photo.image~'') }}">
                    {% endfor %}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Update</button>
                </div>
                {{ form_end(businessFormEdit) }}
            </div>
        </div>
    </div>
    <div class="modal fade" id="addBusinessModal" tabindex="-1" role="dialog"
         aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Edit business</h4>
                </div>
                {{ form_start(businessForm) }}
                <div class="modal-body">
                    {{ form_widget(businessForm) }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Create</button>
                </div>
                {{ form_end(businessForm) }}
            </div>
        </div>
    </div>
{% endblock %}


{% block javascripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <script>
        $(document).ready(function () {
            var html = '<img style="width: 12%" src="{{ asset(''~currentBusiness.logo~'') }}" >';
            $('#singappbundle_businessinfo_additionalCategories')
                .select2({width: '100%'});
            $('#singappbundle_businessinfo_logo').parent().append(html)
        });
    </script>
{% endblock %}